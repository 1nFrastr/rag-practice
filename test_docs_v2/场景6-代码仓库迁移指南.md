# 代码仓库迁移指南

从SVN迁移到Git，或从自建GitLab迁移到GitHub的完整指南。

## SVN到Git迁移

### 准备工作

1. 安装git-svn工具
2. 准备用户映射文件

```bash
# 创建用户映射文件 users.txt
zhangsan = Zhang San <zhangsan@company.com>
lisi = Li Si <lisi@company.com>
```

### 迁移步骤

```bash
# 克隆SVN仓库
git svn clone --stdlayout --authors-file=users.txt \
    svn://old-server/project project-git

# 清理SVN相关引用
cd project-git
git for-each-ref --format='%(refname)' refs/remotes | \
    xargs -n1 git update-ref -d

# 推送到新的Git仓库
git remote add origin git@github.com:company/project.git
git push -u origin --all
git push origin --tags
```

## GitLab到GitHub迁移

### 迁移步骤

```bash
# 克隆完整仓库（包含所有分支）
git clone --mirror git@old-gitlab.com:team/project.git

# 推送到GitHub
cd project.git
git remote set-url origin git@github.com:company/project.git
git push --mirror
```

## 迁移后工作

1. 更新CI/CD配置
2. 更新团队成员权限
3. 更新文档中的仓库地址
4. 设置旧仓库为只读或归档

## 注意事项

- 大文件（>100MB）需要使用Git LFS
- 确保所有分支和标签都已迁移
- 保留迁移日志以备查证
